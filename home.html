<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>zazu clicker</title>
</head>
<body>
    <p>zaza: <span id="contadas">0</span></p>
    <nav>
        <ul>
            <li><a href="welcom.html" class="creation">store</a></li>
            <li><a href="noo.html" class="inve">inventory</a></li>
        </ul>
    </nav>
    <header>
        <div class="center">
            <img src="images/me.jpeg" alt="Clique aqui" width="200" onclick="aumentarValor()" class="estica" id="zazu">
        </div>
        <div class="debbiemons">
            <img src="images/debbie.png" alt="Debbie" width="200" class="estica" id="debbie">
        </div>

        <div class="stats">
        <h3>Zazu's Stats</h3>
        <div>Hunger: <span id="hunger-value">100</span>%</div>
        <div class="stat-bar">
            <div id="hunger-fill" class="stat-fill"></div>
        </div>
        <div>Thirst: <span id="thirst-value">100</span>%</div>
        <div class="stat-bar">
            <div id="thirst-fill" class="stat-fill"></div>
        </div>
    </div>

        <audio id="dalgona" src="https://github.com/arthurlegal552/uncanny-zazu/raw/main/sounds/hotel.mp3" preload="auto"></audio>
        <audio id="mew" src="https://github.com/arthurlegal552/uncanny-zazu/raw/main/sounds/m-e-o-w.mp3" preload="auto"></audio>
        <audio id="db" src="https://github.com/arthurlegal552/uncanny-zazu/raw/main/sounds/double-points-mp3.mp3" preload="auto"></audio>
        <audio id="nyan" src="https://github.com/arthurlegal552/uncanny-zazu/raw/main/sounds/maxwell-the-cat-theme.mp3" preload="auto"></audio>
        <audio id="tboi" src="https://github.com/arthurlegal552/uncanny-zazu/raw/main/sounds/tantsulki.mp3" preload="auto"></audio>
        <audio id="float" src="https://github.com/arthurlegal552/uncanny-zazu/raw/main/sounds/tmpylco0ee7.mp3" preload="auto"></audio>
        <audio id="quake" src="https://github.com/arthurlegal552/uncanny-zazu/raw/main/sounds/skill_spell_earthquake_01-23.mp3" preload="auto"></audio>
        <div class="text">
            <h1>this is zazu</h1>
            <h2>you can click him for points</h2>
            <h3>click any button to start</h3>
        </div>

        <script>
            // Game state variables
            let valor = 0;
            let hunger = 100;
            let thirst = 100;
            let isAlive = true;
            let statInterval;
            let eventTimeout;
            let isEventActive = false;
            const hungerDecay = 0.5;
            const thirstDecay = 0.3;

            // Save game state to localStorage - MODIFIED TO EXPLICITLY SAVE ZERO VALUES
            function saveGameState() {
                // Save values exactly as they are, including zero
                localStorage.setItem("valor", valor.toString());
                localStorage.setItem("zazuHunger", hunger.toString());
                localStorage.setItem("zazuThirst", thirst.toString());
                localStorage.setItem("lastSave", Date.now().toString());
                
                // Debug logging
                console.log("Saved state:", {
                    valor: valor,
                    hunger: hunger,
                    thirst: thirst
                });
            }

            // Load game state from localStorage - MODIFIED TO PROPERLY LOAD ZERO VALUES
            function loadGameState() {
                // Load values, accepting zero as valid value
                const loadedValor = localStorage.getItem("valor");
                const loadedHunger = localStorage.getItem("zazuHunger");
                const loadedThirst = localStorage.getItem("zazuThirst");
                
                valor = loadedValor !== null ? parseInt(loadedValor) : 0;
                hunger = loadedHunger !== null ? parseInt(loadedHunger) : 100;
                thirst = loadedThirst !== null ? parseInt(loadedThirst) : 100;
                
                // Debug logging
                console.log("Loaded state:", {
                    valor: valor,
                    hunger: hunger,
                    thirst: thirst
                });
                
                // Update UI with loaded values
                document.getElementById("contadas").textContent = valor;
                updateStats();
            }

            // Update stats display - MODIFIED TO PROPERLY HANDLE ZERO VALUES
            function updateStats() {
                // Ensure values don't go below zero
                hunger = Math.max(0, hunger);
                thirst = Math.max(0, thirst);
                
                // Update display with current values (including zero)
                document.getElementById("hunger-value").textContent = hunger.toFixed(0);
                document.getElementById("thirst-value").textContent = thirst.toFixed(0);
                document.getElementById("hunger-fill").style.width = hunger + '%';
                document.getElementById("thirst-fill").style.width = thirst + '%';
                
                // Show warning but allow gameplay to continue
                if ((hunger <= 0 || thirst <= 0) && isAlive) {
                    isAlive = true; // Changed to keep allowing clicks
                    document.getElementById("zazu").classList.add("disabled");
                    // Only show alert if this is a new state change
                    if (hunger <= 0 || thirst <= 0) {
                        alert("Zazu is hungry or thirsty! Feed him to keep him happy!");
                    }
                } else if (hunger > 0 && thirst > 0) {
                    document.getElementById("zazu").classList.remove("disabled");
                }
                
                // Always save state, including zero values
                saveGameState();
            }

            // Game loop for stat decay - MODIFIED TO ALLOW ZERO VALUES
            function gameLoop() {
                if (hunger > 0) {
                    hunger = Math.max(0, hunger - hungerDecay);
                }
                if (thirst > 0) {
                    thirst = Math.max(0, thirst - thirstDecay);
                }
                updateStats();
            }

            // Main click function - MODIFIED TO ALLOW CLICKING AT ZERO
            function aumentarValor() {
                valor += 1;
                meow();
                
                // Reduce stats but allow them to stay at zero
                hunger = Math.max(0, hunger - 1);
                thirst = Math.max(0, thirst - 0.5);
                
                document.getElementById("contadas").textContent = valor;
                updateStats();
            }

            // [Rest of your audio functions remain unchanged...]
            function playDalgona() {
                const dalgona = document.getElementById("dalgona");
                dalgona.pause();
                dalgona.currentTime = 0;
                dalgona.loop = true;
                dalgona.play();
            }

            function meow() {
                const mew = document.getElementById("mew");
                mew.pause();
                mew.currentTime = 0;
                mew.loop = false;
                mew.play();
            }

            // [Other audio functions...]

            // Initialize game
            window.onload = function() {
                loadGameState();
                statInterval = setInterval(gameLoop, 1000);
                playDalgona();
                setTimeout(triggerRandomEvent, 60000);
                atualizarDebbie();
            };

            // Save on page unload
            window.addEventListener("beforeunload", function() {
                saveGameState();
            });

            function atualizarDebbie() {
                const dabby = document.querySelector(".debbiemons img");
                if (localStorage.getItem("debbieComprado") === "true") {
                    dabby.style.display = "block";
                } else {
                    dabby.style.display = "none";
                }
            }
        </script>
    </header>
</body>
</html>